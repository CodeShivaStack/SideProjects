<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login</title>

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* --- Global Reset --- */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Inter', sans-serif; }
body { min-height:100vh; display:flex; align-items:center; justify-content:center; background: linear-gradient(135deg, #3b82f6, #2563eb); }

/* --- Login Container --- */
.login-container {
  background: white; border-radius: 16px; padding: 2rem; width: 100%; max-width: 400px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align:center; transition:0.3s;
}
.login-container:hover { box-shadow: 0 12px 35px rgba(0,0,0,0.15); }

/* --- Header --- */
.login-container h1 { font-size:1.75rem; margin-bottom: 1rem; color:#111827; }
.login-container p { color:#6b7280; margin-bottom: 2rem; font-size:0.95rem; }

/* --- Form Inputs --- */
.login-container form { display:flex; flex-direction:column; gap:1rem; }
.login-container input {
  padding: 0.75rem 1rem; border-radius: 10px; border:1px solid #d1d5db;
  font-size:1rem; transition:0.2s; outline:none;
}
.login-container input:focus { border-color:#3b82f6; box-shadow:0 0 0 3px rgba(59,130,246,0.2); }

/* --- Submit Button --- */
.login-container button {
  background:#3b82f6; color:white; padding:0.75rem 1rem; font-size:1rem;
  border:none; border-radius:10px; cursor:pointer; margin-top:0.5rem;
  display:flex; align-items:center; justify-content:center; gap:0.5rem; transition:0.2s;
}
.login-container button:hover { background:#2563eb; }

/* --- Error Message --- */
.error-msg { color:#ef4444; font-size:0.85rem; margin-top:0.25rem; display:none; text-align:left; }

/* --- Responsive --- */
@media(max-width:480px){
  .login-container { padding:1.5rem; width:90%; }
  .login-container h1 { font-size:1.5rem; }
  .login-container button { font-size:0.95rem; }
}
</style>
</head>
<body>

<div class="login-container">
  <h1>Admin Login</h1>
  <p>Enter your credentials to access the dashboard</p>

  <form id="loginForm">
    <input type="email" name="email" placeholder="Email" required>
    <input type="password" name="password" placeholder="Password" required>
    <span class="error-msg" id="loginError"></span>
    <button type="submit"><i class="fa-solid fa-right-to-bracket"></i> Login</button>
  </form>
</div>

<script>
const supabaseClient = supabase.createClient("https://bmfbvckahnuwfmdaqjts.supabase.co","sb_publishable_hroobSDDhZnbywmpkqaXHQ_uFUc_4kR");
    

document.getElementById('loginForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const errorMsg = document.getElementById('loginError');
  errorMsg.style.display='none';
  
  const formData = Object.fromEntries(new FormData(e.target));
  const { data, error } = await supabaseClient.auth.signInWithPassword({
    email: formData.email,
    password: formData.password
  });

  if(error){
    errorMsg.textContent = error.message;
    errorMsg.style.display='block';
  } else {
    // Redirect to admin dashboard
    window.location.href = '/VimalResort/Next/admin2.html';
  }
});


// Auto-redirect if already logged in
(async()=>{
  const { data: { session } } = await supabaseClient.auth.getSession();
  if(session) window.location.href='/VimalResort/Next/admin2.html';
})();
</script>



</body>
</html>
